<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="Author" content="Fly">
    <title>Title</title>
    <style>
        *{ margin: 0; padding: 0; font-family:Microsoft yahei,serif;}
        li{ list-style:none;}
    </style>
</head>
<body>
    <div id="box"></div>
    <script>
        /*
        onmousewheel
         */

//        //兼容非火狐
//        document.onmousewheel = function (e) {
//            e = e || window.event;
//
//            if (  e.wheelDelta < 0 ){
//                //说明滚轮往回拉
//            }else{
//                //说明滚轮往前推
//            }
//
//            //console.log( e.wheelDelta );
//        };
//
//        //兼容火狐
//        document.addEventListener && document.addEventListener("DOMMouseScroll" , function (e) {
//           // console.log( e.detail );
//            if ( e.detail < 0 ){
//                //说明滚轮往前推
//            }else{
//                //说明滚轮往回拉
//            }
//        });

        mouseWheel(document , function (e , d) {
            console.log( d );
        } , false);

        //封装一个兼容的滚轮事件添加方法
        //接收三个参数：
        //  第一个是要添加滚轮事件的对象，
        //  第二个是一个函数（该函数可以拥有两个形参，第一个代表事件对象，第二代表滚轮方向，滚动方向大于0是往回拉，小于0往前推）
        //  第三个参数是一个布尔值，传false时，可以阻止默认的滚轮事件
        function mouseWheel(obj , eFn , bool) {
            obj.onmousewheel = Fn;
            obj.addEventListener && obj.addEventListener("DOMMouseScroll" , Fn);
            function Fn(e) {
                e = e || window.event;
                var d = -e.wheelDelta/120 || e.detail/3;
                eFn.call(this,e,d);
                return bool;
            }
        }

        //就是说，函数里面再执行函数，一种技巧性的写法。


        //下面是完善版的
        function addEvent( obj , eName , eFn ) {
            if(eName === "mousewheel"){
                obj.attachEvent?obj.attachEvent( "onmousewheel" , Fn ):obj.addEventListener("mousewheel" , Fn , false);
                document.addEventListener && obj.addEventListener("DOMMouseScroll" , Fn);
                function Fn(e) {
                    e = e || window.event;
                    var d = -e.wheelDelta/120 || e.detail/3;
                    eFn.call(this,e,d);
                }
            }else{
                if ( obj.attachEvent ){
                    obj.attachEvent( "on"+eName , eFn );//兼容IE8及以下
                }else{
                    obj.addEventListener(eName , eFn , false); //兼容标准浏览器
                }
            }
        }

    </script>
</body>
</html>










































