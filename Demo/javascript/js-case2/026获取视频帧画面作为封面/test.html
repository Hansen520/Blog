<!DOCTYPE html>
<html>
  <head>
    <title>获取视频每一帧</title>
  </head>
  <body>
    <video id="myVideo" src="video.mp4" width="320" height="240"></video>
    <script>
      const video = document.getElementById("myVideo");
      video.addEventListener("loadedmetadata", function () {
        // 在元数据加载完成后执行以下代码
        // 获取视频第一帧的时间点
        const firstFrameTime = 0; // 这里我们获取第一帧，所以时间点设置为0

        // 设置视频当前时间为第一帧的时间点
        video.currentTime = firstFrameTime;

        const canvas = document.createElement("canvas");
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;

        const context = canvas.getContext("2d");
        context.drawImage(video, 0, 0, canvas.width, canvas.height);
        // 获取绘制的第一帧作为封面图的 base64 编码
        const coverImage = canvas.toDataURL("image/png");
        console.log(coverImage);

        const img = document.createElement("img");
        img.src = coverImage;
        document.body.appendChild(img);
      });
    </script>
  </body>
</html>
